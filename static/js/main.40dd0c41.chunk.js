(this.webpackJsonpreact_itunes_movies=this.webpackJsonpreact_itunes_movies||[]).push([[0],[,,,,,function(e,t,a){e.exports=a(12)},,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(4),l=a.n(c),o=(a(10),a(2)),u=a(1),s=(a(11),Object(n.createContext)()),i=function(e){var t=Object(n.useState)(""),a=Object(u.a)(t,2),c=a[0],l=a[1],i=Object(n.useState)([]),m=Object(u.a)(i,2),v=m[0],f=m[1],d="https://itunes.apple.com/search?entity=movie&attribute=movieTerm&limit=10&term=".concat(c);return Object(n.useEffect)((function(){console.log("\nSearching..."),fetch(d).then((function(e){return e.json()})).then((function(e){f(Object(o.a)(e.results)),console.log(">> data fetched",e.results)})).catch((function(e){console.log(">> get error,",e.message)}))}),[d]),r.a.createElement(s.Provider,{value:{term:c,results:v,setTerm:l,setResults:f}},e.children)},m=Object(n.createContext)(),v=function(e){var t=Object(n.useState)([]),a=Object(u.a)(t,2),c=a[0],l=a[1];return r.a.createElement(m.Provider,{value:{favs:c,setFavs:l}},e.children)},f=function(){return r.a.createElement("header",{className:"search__header"},r.a.createElement("h1",null,"iTunes Movie Search"),r.a.createElement("nav",null),r.a.createElement(h,null))},d=function(e){var t=e.fav,a=e.movie,n=e.index,c=e.buttonFunction;return r.a.createElement("li",{className:"search__item","data-id":a.trackId},a.trackName,t?r.a.createElement("button",{onClick:function(e){return c(n)},"data-fav":!0},"UnFav"):r.a.createElement("button",{onClick:function(e){return c(e,a)},"data-fav":!1},"Fav"))},h=function(){var e=Object(n.useContext)(s),t=e.setTerm,a=e.setResults,c=Object(n.useState)(""),l=Object(u.a)(c,2),o=l[0],i=l[1];return r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),a([]),t(o)}},r.a.createElement("input",{type:"text",value:o,onChange:function(e){e.preventDefault(),i(e.target.value)},placeholder:"Search for movies"}),r.a.createElement("button",{type:"submit"},"Search"))},b=function(){var e=Object(n.useContext)(s).results,t=Object(n.useContext)(m),a=t.favs,c=t.setFavs;console.log(">> results:",e);var l=function(e,t){console.log("button Fav:",e.target.dataset.fav),"false"===e.target.dataset.fav&&(c([].concat(Object(o.a)(a),[{trackId:t.trackId,trackName:t.trackName}])),e.target.dataset.fav=!0)};return r.a.createElement("div",{className:"search__list results"},r.a.createElement("h2",null,"Search results:"),r.a.createElement("ul",null,e&&e.map((function(e,t){var n=!!a.find((function(t){return t.trackId===e.trackId}));return r.a.createElement(d,{key:e.trackId,fav:n,index:t,movie:e,buttonFunction:l})}))))},E=function(){var e=Object(n.useContext)(m),t=e.favs,a=e.setFavs;console.log("favs:",t);var c=function(e){var n=t;n.splice(e,1),a(Object(o.a)(n))};return r.a.createElement("div",{className:"search__list favs"},r.a.createElement("h2",null,"Favs:"),r.a.createElement("ul",null,t&&t.map((function(e){return r.a.createElement(d,{key:e.trackId,fav:!0,movie:e,buttonFunction:c})}))))};var j=function(){return r.a.createElement("div",{className:"search"},r.a.createElement(i,null,r.a.createElement(f,null),r.a.createElement(v,null,r.a.createElement("main",null,r.a.createElement(b,null),r.a.createElement(E,null)))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(j,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}],[[5,1,2]]]);
//# sourceMappingURL=main.40dd0c41.chunk.js.map